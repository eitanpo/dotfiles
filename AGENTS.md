# Dotfiles Repository

macOS development environment configuration. Files in `dotfiles/` sync to `~` via rsync.

## Structure

| Path | Purpose |
|------|---------|
| `bootstrap.sh` | Entry point - installs Homebrew, syncs dotfiles, creates skills symlinks |
| `resources/Brewfile` | Package list (brew, cask, mas), regenerated by `update` alias |
| `resources/skills/` | Agent skills (symlinked to ~/.cursor, ~/.claude, ~/.gemini) |
| `dotfiles/` | Config files synced to ~ (see "Where to Add" below) |

## Usage

```bash
cd ~/Projects/dotfiles && source bootstrap.sh  # Initial or update
source ~/.macos                                 # Apply macOS preferences
```

## Agent Configuration

### Skills (symlinked - instant sync)

Edit skills in `resources/skills/`, changes are immediately visible to all agents:
- `~/.cursor/skills` → `$DOTFILES_DIR/resources/skills`
- `~/.claude/skills` → `$DOTFILES_DIR/resources/skills`
- `~/.gemini/skills` → `$DOTFILES_DIR/resources/skills`

### Rules/Instructions (rsync'd)

| File | Purpose |
|------|---------|
| `dotfiles/.cursor/mcp.json` | Cursor MCP server config |
| `dotfiles/.cursor/rules/` | Cursor always-applied rules |
| `dotfiles/.claude/CLAUDE.md` | Claude global instructions |
| `dotfiles/.claude/agents/` | Claude custom subagents |
| `dotfiles/.gemini/GEMINI.md` | Gemini global instructions |

### Sync Commands

```bash
sync-dotfiles   # Sync changes from ~ to repo (capture local edits)
```

## Where to Add

| Type | File |
|------|------|
| Tool integrations | `.bash_profile` (with conditional check below) |
| Aliases | `.aliases` |
| Functions | `.functions` |
| Environment variables | `.exports` |
| Packages | `brew install`, then run `update` |
| Agent skills | `resources/skills/` |
| Agent rules | `dotfiles/.cursor/rules/`, `dotfiles/.claude/`, `dotfiles/.gemini/` |

### Conditional Check Pattern
```bash
if command -v TOOL 1>/dev/null 2>&1; then
    eval "$(TOOL init bash)"
fi
```

## Notes

- **Source of truth**: This repo. Edits in `~` are overwritten on bootstrap.
- **Skills exception**: Skills are symlinked, so edits in `~/.cursor/skills/` etc. update the repo directly.
- **Other config**: `.macos` (system prefs), `.vimrc` (Solarized), `.starship` (prompt)
